<div class="container">
  <h2>Atualizar produto</h2>
  <form [formGroup]="productForm" (ngSubmit)="updateProduct()">
      <div class="file-upload-container">
          <label class="file-upload-label">
              <span>Selecionar um Arquivo</span>
              <input type="file" id="fileInput" (change)="onFileSelected($event)" hidden>
              <mat-icon>attach_file</mat-icon>
          </label>

          <div *ngIf="selectedFile" class="image-preview">
              <div class="circle-image">
                  <img [src]="imagepreview" alt="Imagem selecionada" class="preview-image">
              </div>
          </div>

          <div *ngIf="existingImage" class="image-preview">
              <div class="circle-image">
                  <img [src]="existingImage" alt="Imagem Existente" class="preview-image">
              </div>
          </div>

      </div>
      <mat-form-field appearance="outline" class="form-field">
          <mat-label>Selecione uma categoria</mat-label>
          <mat-select formControlName="categoryId" name="categoryId">
              <mat-option *ngFor="let category of listOfCategories" [value]="category.id">
                  {{category.name}}
              </mat-option>
          </mat-select>
          <mat-error *ngIf="productForm.get('categoryId')?.hasError('required')">
              Este campo é obrigatório !!
          </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
          <mat-label>Nome</mat-label>
          <input matInput type="text" placeholder="Nome" formControlName="name" />
          <mat-error *ngIf="productForm.get('name')?.hasError('required')">
              Este campo é obrigatório
          </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
          <mat-label>Preço</mat-label>
          <input matInput type="number" placeholder="Preço" formControlName="price" />
          <mat-error *ngIf="productForm.get('price')?.hasError('required')">
              Este campo é obrigatório
          </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
          <mat-label>Descrição</mat-label>
          <textarea matInput placeholder="Descrição" formControlName="description"></textarea>
          <mat-error *ngIf="productForm.get('description')?.hasError('required')">
              Este campo é obrigatório
          </mat-error>
      </mat-form-field>

      <button mat-raised-button color="primary" type="submit">Atualizar Produto</button>

  </form>
</div>
